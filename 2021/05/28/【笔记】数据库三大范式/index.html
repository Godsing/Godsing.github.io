<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  

  

  

  

  

  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/logo-64.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/logo-32.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo-16.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo-32.png?v=5.1.3" color="#222">





  <meta name="keywords" content="数据库,第一范式,第二范式,第三范式," />










<meta name="description" content="前言每一个参与设计数据库表的人，都应该了解数据库范式。也许，你可以故意设计不符合第三范式(3NF)要求的数据库表，但前提是你应该知道什么是第三范式。 带着以下问题阅读本文，会更有收获哦！  什么是数据库范式？ 为什么需要遵循某些范式？ 怎么做才算遵循了范式？ 什么时候不需要遵循范式？  当然，对于这里的每个问题，不会单独作为一节进行展开。下文的组织结构是，对每个范式逐一进行介绍，最后进行总结。在这">
<meta name="keywords" content="数据库,第一范式,第二范式,第三范式">
<meta property="og:type" content="article">
<meta property="og:title" content="【总结】数据库三大范式、反范式">
<meta property="og:url" content="http://godsing.top/2021/05/28/【笔记】数据库三大范式/index.html">
<meta property="og:site_name" content="Godsing&#39;s Blog">
<meta property="og:description" content="前言每一个参与设计数据库表的人，都应该了解数据库范式。也许，你可以故意设计不符合第三范式(3NF)要求的数据库表，但前提是你应该知道什么是第三范式。 带着以下问题阅读本文，会更有收获哦！  什么是数据库范式？ 为什么需要遵循某些范式？ 怎么做才算遵循了范式？ 什么时候不需要遵循范式？  当然，对于这里的每个问题，不会单独作为一节进行展开。下文的组织结构是，对每个范式逐一进行介绍，最后进行总结。在这">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/ee42b629d1ed1f7d67109e612e3a6c2e1603442149433.jpeg">
<meta property="og:image" content="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/2cfb7e985ee118d63cf0eb7850cd4be41603442149433.jpeg">
<meta property="og:image" content="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/8c44f21776ae8e70ec5ace678c423d5a1603442149434-20210528152831696.jpeg">
<meta property="og:image" content="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/3badbefe14cd4c95b8909151641e91d71603442149434.jpeg">
<meta property="og:image" content="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/8c07b2419f30d0ad60c95cf7ec9df3651603442149434.jpeg">
<meta property="og:image" content="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/3e1ff928f313b9ef895bb3e3d4d22c2c1603442149436.jpeg">
<meta property="og:image" content="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/1ede71ef8292d3b4c46810b6e0dfd6091603442149436.jpeg">
<meta property="og:image" content="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/7bb5d51f144e163d8ad7a9f08c130dc71603442149436.jpeg">
<meta property="og:image" content="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/bV5Dlb.png">
<meta property="og:image" content="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/bV5Dm7.png">
<meta property="og:image" content="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/bV5Dq1.png">
<meta property="og:image" content="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/bV5Drl.png">
<meta property="og:updated_time" content="2021-05-28T17:03:55.710Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【总结】数据库三大范式、反范式">
<meta name="twitter:description" content="前言每一个参与设计数据库表的人，都应该了解数据库范式。也许，你可以故意设计不符合第三范式(3NF)要求的数据库表，但前提是你应该知道什么是第三范式。 带着以下问题阅读本文，会更有收获哦！  什么是数据库范式？ 为什么需要遵循某些范式？ 怎么做才算遵循了范式？ 什么时候不需要遵循范式？  当然，对于这里的每个问题，不会单独作为一节进行展开。下文的组织结构是，对每个范式逐一进行介绍，最后进行总结。在这">
<meta name="twitter:image" content="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/ee42b629d1ed1f7d67109e612e3a6c2e1603442149433.jpeg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.3',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":true,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://godsing.top/2021/05/28/【笔记】数据库三大范式/"/>





  <title>【总结】数据库三大范式、反范式 | Godsing's Blog</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Godsing's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Always growing</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://godsing.top/2021/05/28/【笔记】数据库三大范式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Godsing">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Godsing's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">【总结】数据库三大范式、反范式</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-05-28T00:00:00+08:00">
                2021-05-28
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2021-05-29T01:03:55+08:00">
                2021-05-29
              </time>
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/05/28/【笔记】数据库三大范式/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2021/05/28/【笔记】数据库三大范式/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2021/05/28/【笔记】数据库三大范式/" class="leancloud_visitors" data-flag-title="【总结】数据库三大范式、反范式">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  5,281 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  18 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>每一个参与设计数据库表的人，都应该了解数据库范式。也许，你可以故意设计不符合第三范式(3NF)要求的数据库表，但前提是你应该知道什么是第三范式。</p>
<p>带着以下问题阅读本文，会更有收获哦！</p>
<ul>
<li>什么是数据库范式？</li>
<li>为什么需要遵循某些范式？</li>
<li>怎么做才算遵循了范式？</li>
<li>什么时候不需要遵循范式？</li>
</ul>
<p>当然，对于这里的每个问题，不会单独作为一节进行展开。下文的组织结构是，对每个范式逐一进行介绍，最后进行总结。在这个过程中，以上的几个问题自然就会解决。</p>
<a id="more"></a>
<h2 id="什么是范式（NF）"><a href="#什么是范式（NF）" class="headerlink" title="什么是范式（NF）"></a>什么是范式（NF）</h2><p>按照教材中的定义，范式是 “符合某一种级别的关系模式的集合，表示一个关系内部各属性之间的联系的合理化程度”。</p>
<p>按我的理解，大概就是 <strong>数据库表的某种设计规范。而所谓“规范”，其实就是一条条规则</strong>。所以，只要把规则说得足够清晰、简洁、准确，自然而然就知道怎么用了。</p>
<blockquote>
<p>数据库范式也分为1NF，2NF，3NF，BCNF，4NF，5NF。一般在我们设计关系型数据库的时候，最多考虑到BCNF就够。符合高一级范式的设计，必定符合低一级范式，例如符合2NF的关系模式，必定符合1NF。</p>
</blockquote>
<p>下面逐一介绍每个范式。</p>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>在正式开始之前，需要了解的最少必要概念：</p>
<ul>
<li>表：如果用过 Excel，就很好理解了。所谓表，就类似 Excel 里的表格结构，每一列都代表一个属性，每一行都记录了一些数据。<ul>
<li>比如，有一张成绩表，有这么几列 “学号、课程、分数”，而某一行形如 “ZY210388 数学 89”。</li>
</ul>
</li>
<li>属性：参考 “表” 的定义，比如刚刚介绍的 “学号”。</li>
<li>属性组：包含几个属性的集合。所以，属性是特殊的属性组，即只包含一个属性的属性组。</li>
<li>记录：某一行数据。</li>
<li>函数依赖、码、主属性：对这几个概念的介绍参考下文，但可以先跳过，需要的时候再回过头来看。</li>
</ul>
<h3 id="函数依赖"><a href="#函数依赖" class="headerlink" title="函数依赖"></a>函数依赖</h3><p>若在一张存有数据的表中，在<strong>属性组 X</strong> 的<strong>值</strong>确定的情况下，<strong>属性 Y </strong>的<strong>值</strong>也就<strong>唯一确定</strong>下来，那么就可以说 Y 函数依赖于 X，写作 X → Y。（速记：箭头的指向，就像是在说 X 经过推导/映射可以得到 Y）</p>
<p>也就是说，在数据表中，不存在任意两条记录，它们在 X 属性组上的值相同，而在 Y 属性上的值不同。<strong>X 确定了一个取值，Y 的取值也就确定下来，并且只有一个</strong>，不会有多个，<strong>就像函数映射 y = f(x) 一样</strong>，所以称作<strong>函数依赖</strong>。</p>
<blockquote>
<p>例如，对于表3中的数据，找不到任何一条记录，它们的学号相同而对应的姓名不同。所以我们可以说<strong>姓名函数依赖于学号</strong>，写作 <strong>学号 → 姓名</strong>。</p>
<p>表中其他的函数依赖关系还有如：</p>
<ul>
<li>系名 → 系主任</li>
<li>学号 → 系主任</li>
<li>（学号，课名） → 分数</li>
</ul>
<p>但以下函数依赖关系则不成立：</p>
<ul>
<li>学号 → 课名</li>
<li>学号 → 分数</li>
<li>课名 → 系主任</li>
<li>（学号，课名） → 姓名</li>
</ul>
</blockquote>
<p>从“函数依赖”这个概念展开，还会有三个概念：</p>
<h4 id="完全函数依赖"><a href="#完全函数依赖" class="headerlink" title="完全函数依赖"></a>完全函数依赖</h4><p>在一张表中，若 X → Y，且对于属性组 X 的任何一个真子集 X’（A 包含 B，而 B 不包含 A，则 B 是 A 的真子集），X’ → Y 不成立，那么我们称 Y 对于 X <strong>完全函数依赖</strong>，记作 $X \overset{F}{\rightarrow} Y$。(速记：Full) </p>
<p>当我们说函数依赖时，一般暗指<strong>完全</strong>函数依赖。</p>
<blockquote>
<p>例如：</p>
<ul>
<li>学号 $\overset{F}{\rightarrow}$ 姓名</li>
<li>（学号，课名） $\overset{F}{\rightarrow}$ 分数 （注：同一个的学号对应的分数不确定，同一个课名对应的分数也不确定，但确定下学号和课名后，分数就确定且唯一了）</li>
</ul>
</blockquote>
<h4 id="部分函数依赖"><a href="#部分函数依赖" class="headerlink" title="部分函数依赖"></a>部分函数依赖</h4><p>假如 Y 函数依赖于 X，但同时 Y 并不完全函数依赖于 X，那么我们就称 Y 部分函数依赖于 X，记作 $X \overset{P}{\rightarrow} Y$。(速记：Partial)</p>
<p>Y 部分函数依赖于 X，意思是 Y <strong>完全</strong>函数依赖于 <strong>X 的一部分(某个真子集)</strong>，只需要这个子集，就能唯一确定下来 Y。显然，<strong>这意味着 X 必须是至少包含 2 个属性的属性组，才能存在非空的真子集</strong>。</p>
<blockquote>
<p>例如：</p>
<ul>
<li>（学号，课名） $\overset{P}{\rightarrow}$ 姓名（因为 “学号 $\overset{F}{\rightarrow}$ 姓名”，只需要知道学号，<strong>不需要课名</strong>，也能知道姓名）</li>
</ul>
</blockquote>
<h4 id="传递函数依赖"><a href="#传递函数依赖" class="headerlink" title="传递函数依赖"></a>传递函数依赖</h4><p>假如 Z 函数依赖于 Y，而 Y 函数依赖于 X （前提：『Y 不是 X 的子集，且 X 不函数依赖于 Y』），那么我们就称 Z 传递函数依赖于 X ，记作 $X \overset{T}{\rightarrow} Y$。(速记：Transfer)</p>
<h3 id="码"><a href="#码" class="headerlink" title="码"></a>码</h3><p>设 K 为某表中的一个属性或属性组，若除 K 之外的所有属性，都<strong>完全</strong>函数依赖于 K（这个“完全”不要漏了），那么我们称 K 为<strong>候选码</strong>，简称为<strong>码</strong>。</p>
<p>通俗一点的理解：<strong>假如当 K 确定的情况下，该表(除 K 之外的)所有属性的值也就随之确定，那么 K 就是码。</strong>一张表中可以有超过一个码。实际应用中为了方便，通常选择其中的一个码作为<strong>主码</strong>。</p>
<blockquote>
<p>例如：<br>对于表3，<strong>（学号、课名）</strong>这个属性组就是码。该表中有且仅有这一个码。（假设所有课没有重名的情况）</p>
</blockquote>
<h3 id="主属性"><a href="#主属性" class="headerlink" title="主属性"></a>主属性</h3><p>包含在<strong>所有码</strong>中的每个属性，都是主属性。而其他属性就是非主属性。</p>
<blockquote>
<p>例如：<br>对于表3，主属性就有两个，<strong>学号</strong> 与 <strong>课名</strong>。</p>
</blockquote>
<h2 id="第一范式（1NF）"><a href="#第一范式（1NF）" class="headerlink" title="第一范式（1NF）"></a>第一范式（1NF）</h2><p>1NF 包含很多条规则，以某一条规则为例：符合 1NF 的表中的<strong>每个属性都不可再分</strong>。</p>
<p>网上对“不可再分”的解释，大多数我看了之后实在有点懵。按我的理解，所谓属性不可再分，指的是说，这个属性不应该有子属性。通俗来说就是，在存储某一行数据时，每个属性应该只存储一个属性值，而不存多个值。</p>
<blockquote>
<p>比如下表，你不能既要求有 “进货”、“销售” 这样的属性，又要求在 “进货” 这一属性下有两个子属性，存储两个值，分别表示进货的数量和单价。不能这么做。<strong>表 1：</strong></p>
<p><img src="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/ee42b629d1ed1f7d67109e612e3a6c2e1603442149433.jpeg" alt="数据库知识梳理——彻底理解数据库三大范式（1NF,2NF,3NF）1"></p>
<p>要么，你的 “进货成本”、“销售收入” 属性下，都只存储一个值，事先计算好数量和单价的乘积存进来；</p>
<p>要么，你得把它拆成如下图所示的四列（“进货数量”、“进货单价”、“销售数量”、“销售收入”），<strong>表 2：</strong></p>
<p><img src="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/2cfb7e985ee118d63cf0eb7850cd4be41603442149433.jpeg" alt="数据库知识梳理——彻底理解数据库三大范式（1NF,2NF,3NF）2"></p>
</blockquote>
<p>很多人可能会有个疑惑：怎么会有人想到要在表格中搞子属性呢？这不是脑子抽风了吗？</p>
<p>哈哈，之所以这么觉得，可能是因为你已经习惯了使用 MySQL 之类的数据库了。而所有的关系型数据库都不支持子属性这种骚操作，所以也就不会意料到还有人想这么搞。不过也正式因为数据库的这种限制，所有的表都自然而然已经满足第一范式。</p>
<p>那满足第一范式有啥好处？这个… 似乎不太好表述。我想，最大的好处就是简单吧。不把事情搞复杂，问题就简单多了。</p>
<blockquote>
<p>反过来想，要是一个数据库表既有属性，也有子属性，那么在查询的时候，是按照属性来筛选呢，还是子属性呢？如果按照子属性，那属性还有存在的意义么？如果有子属性就不需要属性了，那还保留它干啥？如果要保留嵌套属性，那么数据库表底层的存储结构、查询逻辑等要怎么设计？思考一番你就会发现，似乎仅保留子属性比保留嵌套的属性带来的好处多得多。这也是为什么关系型数据库都这么设计。</p>
</blockquote>
<h2 id="第二范式（2NF）"><a href="#第二范式（2NF）" class="headerlink" title="第二范式（2NF）"></a>第二范式（2NF）</h2><h3 id="1NF-存在的问题"><a href="#1NF-存在的问题" class="headerlink" title="1NF 存在的问题"></a>1NF 存在的问题</h3><p>仅仅满足第一范式的表长这样，<strong>表 3：</strong></p>
<p><img src="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/8c44f21776ae8e70ec5ace678c423d5a1603442149434-20210528152831696.jpeg" alt="数据库知识梳理——彻底理解数据库三大范式（1NF,2NF,3NF）3"></p>
<p>不用多想，最直接的观察就能想到这表存在一个问题：<strong>数据冗余</strong>。这里的姓名、系名、系主任等重复出现太多次了。</p>
<p>除此之外，细想一下，还有几个问题：</p>
<ul>
<li><strong>插入异常</strong>：假如学校新建了一个系，但是暂时还没有招收任何学生（比如3月份就新建了，但要等到8月份才招生），那么是无法将系名与系主任的数据单独地添加到数据表中去的。</li>
<li><strong>修改异常</strong>：假如李小明转系到法律系，那么为了保证数据库中数据的一致性，需要修改三条记录中系与系主任的数据。</li>
<li><strong>删除异常</strong>：假如将某个系中所有学生相关的记录都删除，那么所有系与系主任的数据也就随之消失了（一个系所有学生都没有了，并不表示这个系就没有了）。</li>
</ul>
<p>所以你会发现，仅符合 1NF 的数据库设计，存在这样那样的问题。所以我们需要提高设计标准，去掉导致上述四种问题的因素，而这种设计标准，就是更高一级的范式（2NF）。使表设计符合第二范式，就是所谓的“规范化”。</p>
<h3 id="2NF-的定义"><a href="#2NF-的定义" class="headerlink" title="2NF 的定义"></a>2NF 的定义</h3><p>2NF 的定义：<strong>在1NF的基础之上，消除了非主属性对于码的部分函数依赖</strong>。对 <strong>“函数依赖”</strong>、<strong>“码”</strong>、<strong>“非主属性”</strong>、与<strong>“部分函数依赖”</strong> 的解释，参考上文。</p>
<p>理解了 2NF 之后，就可以来看看怎么用它了。具体用法是，我们在设计好一个表时，或者拿到一个表结构时，先看看是否符合 2NF，如果不符合，再考虑怎么解决。</p>
<p>下面结合具体实例进行说明。在这个过程中，你会知道如何判断是否符合 2NF，如何重新设计表结构使之满足 2NF，以及满足 2NF 能带来哪些好处、解决哪些问题。</p>
<h3 id="判断是否符合-2NF"><a href="#判断是否符合-2NF" class="headerlink" title="判断是否符合 2NF"></a>判断是否符合 2NF</h3><p>首先，我们需要判断，表 3 是否符合 2NF 的要求？根据 2NF 的定义，其实就是要看数据表中<strong>是否存在 非主属性 对于 码 的 部分函数依赖</strong>。若存在，则数据表最高只符合 1NF 的要求，若不存在，则符合 2NF 的要求。</p>
<p>具体判断的步骤是：</p>
<p>第一步：找出数据表中所有的<strong>码</strong>。</p>
<p>第二步：根据第一步所得到的码，找出所有的<strong>主属性</strong>。那么，剩下的就都是<strong>非主属性</strong>了。</p>
<p>第三步：逐一检查每个非主属性，看是否对某个码存在<strong>部分函数依赖</strong>。</p>
<blockquote>
<p>第一步：</p>
<ol>
<li>查看所有每一单个属性，当它的值确定了，是否剩下的所有属性值都能确定。</li>
<li>查看所有包含有两个属性的属性组，当它的值确定了，是否剩下的所有属性值都能确定。</li>
<li>……</li>
<li>查看所有包含了六个属性，也就是所有属性的属性组，当它的值确定了，是否剩下的所有属性值都能确定。</li>
</ol>
<p>看起来很麻烦是吧，但是这里有一个诀窍，就是<strong>假如A是码，那么所有包含了A的属性组，</strong>如（A，B）、（A，C）、（A，B，C）等，<strong>就都不是码了</strong>（因为此时必然有其它属性 Y 完全依赖于 A，进而必然是部分依赖于包含 A 的属性组，故这个属性组就不满足码得到要求了）。</p>
<p><strong>图4</strong>表示了表中所有的完全函数依赖关系：</p>
<p><img src="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/3badbefe14cd4c95b8909151641e91d71603442149434.jpeg" alt="数据库知识梳理——彻底理解数据库三大范式（1NF,2NF,3NF）7"></p>
<p>可以看到，能让所有其他属性都完全函数依赖的，只有 (学号, 课名) 这个属性组，因此它就是码。</p>
<p>第二步：</p>
<p>可以得到，主属性有两个：<strong>学号</strong> 与 <strong>课名</strong>；</p>
<p>非主属性有四个：<strong>姓名</strong>、<strong>系名</strong>、<strong>系主任</strong>、<strong>分数</strong></p>
<p>第三步：</p>
<p>对于<em>（学号，课名） → 姓名</em>，有 <em>学号 → 姓名</em>，存在非主属性 <strong>姓名</strong> 对码（学号，课名）的部分函数依赖。<br>对于<em>（学号，课名） → 系名</em>，有 <em>学号 → 系名</em>，存在非主属性 <strong>系名</strong> 对码（学号，课名）的部分函数依赖。<br>对于<em>（学号，课名） → 系主任</em>，有 <em>学号 → 系主任</em>，存在非主属性 <strong>系主任</strong> 对码（学号，课名）的部分函数依赖。</p>
</blockquote>
<p>综上，表 3 存在非主属性对于码的部分函数依赖，最高只符合 1NF 的要求，不符合 2NF 的要求。</p>
<h3 id="使之符合-2NF"><a href="#使之符合-2NF" class="headerlink" title="使之符合 2NF"></a>使之符合 2NF</h3><p>为了让表3符合2NF的要求，我们必须消除这些部分函数依赖，<strong>只有一个办法，就是将大数据表拆分成两个或者更多个更小的数据表</strong>，在拆分的过程中，要达到更高一级范式的要求，这个过程叫做”<strong>模式分解</strong>“。模式分解的方法不是唯一的，以下是其中一种方法：</p>
<blockquote>
<p>选课表：（学号，课名，分数）<br>学生表：（学号，姓名，系名，系主任）</p>
</blockquote>
<p>模式分解以后的新的函数依赖关系如<strong>图 5</strong>：</p>
<p><img src="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/8c07b2419f30d0ad60c95cf7ec9df3651603442149434.jpeg" alt="数据库知识梳理——彻底理解数据库三大范式（1NF,2NF,3NF）8"></p>
<p>我们先来判断以下，<strong>选课</strong>表与<strong>学生</strong>表，是否符合了2NF的要求？</p>
<blockquote>
<p>对于<strong>选课</strong>表，其码是<strong>（学号，课名）</strong>，主属性是<strong>学号</strong>和<strong>课名</strong>，非主属性是<strong>分数</strong>。当<strong>学号</strong>确定，并不能唯一确定<strong>分数</strong>，当<strong>课名</strong>确定，也不能唯一确定<strong>分数</strong>，所以不存在非主属性<strong>分数</strong>对于码 <strong>（学号，课名）</strong>的部分函数依赖，所以此表<strong>符合</strong> 2NF 的要求。</p>
<p>对于<strong>学生</strong>表，其码是<strong>学号，</strong>主属性是<strong>学号</strong>，非主属性是<strong>姓名、系名</strong>和<strong>系主任</strong>，因为码只有一个属性，所以不可能存在非主属性对于码的部分函数依赖，所以此表<strong>符合</strong> 2NF 的要求。</p>
</blockquote>
<p>表 4 展示了模式分解以后新的数据：</p>
<p><img src="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/3e1ff928f313b9ef895bb3e3d4d22c2c1603442149436.jpeg" alt="数据库知识梳理——彻底理解数据库三大范式（1NF,2NF,3NF）9"></p>
<p>现在我们来看一下，进行同样的操作，是否还存在着之前的那些问题？</p>
<blockquote>
<p>数据冗余：学生的姓名、系名与系主任，不再像之前一样重复那么多次了，但系主任和系名依然有些重复。——有改进，但不完全</p>
<p>插入异常：若要插入一个尚无学生的新系的信息，因为学生表的码是学号，<strong>不能为空</strong>，所以此操作不被允许。——无改进</p>
<p>修改异常：若李小明转系到法律系，只需要修改一次对应的<strong>系名</strong>的值即可。——有改进</p>
<p>删除异常：若删除某个系中所有的学生记录，该系的信息仍然全部丢失。——无改进</p>
</blockquote>
<p>所以说，仅仅符合 2NF 的要求，很多情况下还是不够的，而出现问题的原因，在于仍然存在非主属性<strong>系主任</strong>对于码<strong>学号</strong>的<strong>传递函数依赖</strong>。为了能进一步解决这些问题，我们还需要将符合2NF要求的数据表改进为符合 3NF 的要求。</p>
<h2 id="第三范式（3NF）"><a href="#第三范式（3NF）" class="headerlink" title="第三范式（3NF）"></a>第三范式（3NF）</h2><h3 id="3NF-的定义"><a href="#3NF-的定义" class="headerlink" title="3NF 的定义"></a>3NF 的定义</h3><p><strong>第三范式（3NF）</strong>：<strong>3NF 在 2NF 的基础之上，消除了非主属性对于码的传递函数依赖</strong>。</p>
<h3 id="判断是否符合-3NF"><a href="#判断是否符合-3NF" class="headerlink" title="判断是否符合 3NF"></a>判断是否符合 3NF</h3><p>接下来我们看看表 4 中的设计，是否符合 3NF 的要求。</p>
<blockquote>
<p>对于<strong>选课</strong>表，主码为（学号，课名），主属性为学号和课名，<strong>非主属性只有一个“分数”，不可能存在传递函数依赖</strong>，所以<strong>选课</strong>表的设计，符合 3NF 的要求。</p>
<p>对于<strong>学生</strong>表，主码为<strong>学号</strong>，主属性为<strong>学号</strong>，非主属性为<strong>姓名</strong>、<strong>系名</strong>和<strong>系主任</strong>。因为 学号 → 系名，同时 系名 → 系主任，所以存在非主属性<strong>系主任</strong>对于码<strong>学号</strong>的传递函数依赖（参考上文图 5 中的红色箭头），所以<strong>学生</strong>表的设计，不符合3NF的要求。</p>
</blockquote>
<h3 id="使之符合-3NF"><a href="#使之符合-3NF" class="headerlink" title="使之符合 3NF"></a>使之符合 3NF</h3><p>为了让数据表设计达到3NF，我们必须进一步进行模式分解：</p>
<blockquote>
<p>选课（学号，课名，分数）<br>学生（学号，姓名，系名）<br>系（系名，系主任）</p>
</blockquote>
<p>再次分析是否都满足 3NF 要求：</p>
<blockquote>
<p>对于<strong>选课</strong>表，符合 3NF 的要求，之前已经分析过了。</p>
<p>对于<strong>学生</strong>表，码为<strong>学号</strong>，主属性为<strong>学号</strong>，非主属性为<strong>姓名</strong>、<strong>系名</strong>，且二者间不存在函数依赖关系，所以不存在非主属性对于码的传递函数依赖，符合 3NF 的要求。</p>
<p>对于<strong>系</strong>表，码为<strong>系名</strong>，主属性为<strong>系名</strong>，非主属性只有一个<strong>系主任</strong>，不可能存在非主属性对于码的传递函数依赖（至少要有三个属性才可能存在传递函数依赖关系），所以符合 3NF 的要求。</p>
</blockquote>
<p>新的函数依赖关系如<strong>图 6</strong>：</p>
<p><img src="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/1ede71ef8292d3b4c46810b6e0dfd6091603442149436.jpeg" alt="数据库知识梳理——彻底理解数据库三大范式（1NF,2NF,3NF）10"></p>
<p>新的数据表如<strong>表 5</strong>：</p>
<p><img src="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/7bb5d51f144e163d8ad7a9f08c130dc71603442149436.jpeg" alt="数据库知识梳理——彻底理解数据库三大范式（1NF,2NF,3NF）11"></p>
<blockquote>
<p>注：上图中的<strong>系表</strong>，第二行重复了，有误，实际应去掉。</p>
</blockquote>
<p>现在我们再来看一下，进行同样的操作，是否还存在着之前的那些问题？</p>
<blockquote>
<p>数据冗余：系主任和系名的重复也消失了，总体上冗余更少了。——有改进</p>
<p>插入异常：若要插入一个尚无学生的新系的信息，直接操作<strong>系表</strong>即可，完全支持。——有改进</p>
<p>修改异常：若李小明转系到法律系，只需要修改一次对应的<strong>系名</strong>的值即可。——有改进</p>
<p>删除异常：若删除某个系中所有的学生记录，该系的信息不会丢失。——有改进</p>
</blockquote>
<h2 id="反范式化"><a href="#反范式化" class="headerlink" title="反范式化"></a>反范式化</h2><p><strong>一般说来，数据库只需满足第三范式（<code>3NF</code>）就行了。</strong></p>
<p>没有冗余的数据库设计很容易可以做到。但是，没有冗余的数据库未必是最好的数据库，有时为了提高运行效率，就必须降低范式标准，适当保留冗余数据。具体做法是：在概念数据模型设计时遵守第三范式，然后将降低范式标准的工作放到物理数据模型设计时考虑。</p>
<p>降低范式说白了就是增加字段，允许冗余，<strong>达到以空间换时间的目的</strong>。</p>
<p>〖例〗：假设有一张订单表，存在 “单价”、“数量”、“金额” 几个非主属性，而 “金额” 可以由 “单价” 乘以 “数量” 得到。显然该表的设计不满足第三范式，因为 “金额” 是冗余字段，它完全函数依赖于属性组<code>(单价、数量)</code>，进而 “金额” 对于码(这里未列出)存在传递函数依赖。但是，增加“金额”这个冗余字段，可以提高查询统计的速度，这就是以空间换时间的作法。</p>
<blockquote>
<p>PS：在<code>Rose 2002</code>中，规定列有两种类型：<strong>数据列</strong>和<strong>计算列</strong>。像 “金额” 这样的列被称为 “计算列”，而 “单价” 和 “数量” 这样的列被称为 “数据列”。</p>
</blockquote>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><h3 id="1NF（第一范式）"><a href="#1NF（第一范式）" class="headerlink" title="1NF（第一范式）"></a>1NF（第一范式）</h3><p>1NF 的限定条件如下：</p>
<ol>
<li>每个列必须有一个唯一的名称</li>
<li>行和列的次序无关紧要</li>
<li>每一列都必须有单个数据类型</li>
<li>不允许包含相同值的两行</li>
<li>每一列都必须包含一个单值 （一个列不能保存多个数据值，也就是上文提到的“属性不可再分”）</li>
<li>列不能包含重复的组</li>
</ol>
<p>第一范式会存在数据过度冗余，以及更新、删除和插入异常的问题。</p>
<h3 id="2NF（第二范式）"><a href="#2NF（第二范式）" class="headerlink" title="2NF（第二范式）"></a>2NF（第二范式）</h3><p>2NF 的限定条件如下：</p>
<ol>
<li>它符合第一范式</li>
<li>所有的非键值字段均依赖于所有的键值字段</li>
</ol>
<p>第二范式也会存在更新、删除和插入异常的问题。</p>
<h3 id="3NF（第三范式）"><a href="#3NF（第三范式）" class="headerlink" title="3NF（第三范式）"></a>3NF（第三范式）</h3><p>3NF 的限定条件如下：</p>
<ol>
<li>符合 2NF</li>
<li>不包含传递相关性（即，一个非键值字段的值依赖于另一个非键值字段的值）。</li>
</ol>
<p>符合 3NF 要求的数据库设计，<strong>基本</strong>上解决了<strong>数据冗余过大，插入异常，修改异常，删除异常</strong>的问题。当然，在实际中，往往为了性能上或者应对扩展的需要，经常 做到 2NF 或者 1NF，但是作为数据库设计人员，至少应该知道，3NF 的要求是怎样的。</p>
<h3 id="范式化和反范式化的优缺点"><a href="#范式化和反范式化的优缺点" class="headerlink" title="范式化和反范式化的优缺点"></a>范式化和反范式化的优缺点</h3><h4 id="范式化"><a href="#范式化" class="headerlink" title="范式化"></a>范式化</h4><p><strong>优点：</strong></p>
<p><img src="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/bV5Dlb.png" alt="clipboard.png"></p>
<p><strong>缺点：</strong></p>
<p><img src="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/bV5Dm7.png" alt="clipboard.png"></p>
<h4 id="反范式化-1"><a href="#反范式化-1" class="headerlink" title="反范式化"></a>反范式化</h4><p><strong>优点：</strong></p>
<p><img src="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/bV5Dq1.png" alt="clipboard.png"></p>
<p><strong>缺点：</strong></p>
<p><img src="https://mdpicbed.oss-cn-hongkong.aliyuncs.com/imgs/bV5Drl.png" alt="clipboard.png"></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="https://www.huaweicloud.com/articles/d6f987212139ef8494f4fd9151e138ab.html" target="_blank" rel="noopener">数据库知识梳理——彻底理解数据库三大范式（1NF,2NF,3NF）</a></li>
<li><a href="https://segmentfault.com/a/1190000013695030" target="_blank" rel="noopener">数据库逻辑设计之三大范式通俗理解，一看就懂，书上说的太晦涩</a></li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/数据库/" rel="tag"># 数据库</a>
          
            <a href="/tags/第一范式/" rel="tag"># 第一范式</a>
          
            <a href="/tags/第二范式/" rel="tag"># 第二范式</a>
          
            <a href="/tags/第三范式/" rel="tag"># 第三范式</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/08/13/为什么验证集和测试集要分开？/" rel="next" title="为什么验证集和测试集要分开？">
                <i class="fa fa-chevron-left"></i> 为什么验证集和测试集要分开？
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.png"
                alt="Godsing" />
            
              <p class="site-author-name" itemprop="name">Godsing</p>
              <p class="site-description motion-element" itemprop="description">Permission to be human.</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/godsing" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:zzzpwang@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/Godsing1" target="_blank" title="Twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.facebook.com/profile.php?id=100015993992707" target="_blank" title="Facebook">
                      
                        <i class="fa fa-fw fa-facebook"></i>Facebook</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                友情链接
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://zerteen.github.io/" title="Zerteen" target="_blank">Zerteen</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#什么是范式（NF）"><span class="nav-number">2.</span> <span class="nav-text">什么是范式（NF）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#基本概念"><span class="nav-number">3.</span> <span class="nav-text">基本概念</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#函数依赖"><span class="nav-number">3.1.</span> <span class="nav-text">函数依赖</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#完全函数依赖"><span class="nav-number">3.1.1.</span> <span class="nav-text">完全函数依赖</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#部分函数依赖"><span class="nav-number">3.1.2.</span> <span class="nav-text">部分函数依赖</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#传递函数依赖"><span class="nav-number">3.1.3.</span> <span class="nav-text">传递函数依赖</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#码"><span class="nav-number">3.2.</span> <span class="nav-text">码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#主属性"><span class="nav-number">3.3.</span> <span class="nav-text">主属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第一范式（1NF）"><span class="nav-number">4.</span> <span class="nav-text">第一范式（1NF）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第二范式（2NF）"><span class="nav-number">5.</span> <span class="nav-text">第二范式（2NF）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1NF-存在的问题"><span class="nav-number">5.1.</span> <span class="nav-text">1NF 存在的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2NF-的定义"><span class="nav-number">5.2.</span> <span class="nav-text">2NF 的定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#判断是否符合-2NF"><span class="nav-number">5.3.</span> <span class="nav-text">判断是否符合 2NF</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使之符合-2NF"><span class="nav-number">5.4.</span> <span class="nav-text">使之符合 2NF</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第三范式（3NF）"><span class="nav-number">6.</span> <span class="nav-text">第三范式（3NF）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3NF-的定义"><span class="nav-number">6.1.</span> <span class="nav-text">3NF 的定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#判断是否符合-3NF"><span class="nav-number">6.2.</span> <span class="nav-text">判断是否符合 3NF</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使之符合-3NF"><span class="nav-number">6.3.</span> <span class="nav-text">使之符合 3NF</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#反范式化"><span class="nav-number">7.</span> <span class="nav-text">反范式化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结"><span class="nav-number">8.</span> <span class="nav-text">总结</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1NF（第一范式）"><span class="nav-number">8.1.</span> <span class="nav-text">1NF（第一范式）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2NF（第二范式）"><span class="nav-number">8.2.</span> <span class="nav-text">2NF（第二范式）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3NF（第三范式）"><span class="nav-number">8.3.</span> <span class="nav-text">3NF（第三范式）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#范式化和反范式化的优缺点"><span class="nav-number">8.4.</span> <span class="nav-text">范式化和反范式化的优缺点</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#范式化"><span class="nav-number">8.4.1.</span> <span class="nav-text">范式化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#反范式化-1"><span class="nav-number">8.4.2.</span> <span class="nav-text">反范式化</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考资料"><span class="nav-number">9.</span> <span class="nav-text">参考资料</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Godsing</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> <!-- v5.1.3 --> </div>




        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'IJ3nRYlbTk5ht2yUt70RXSgI-gzGzoHsz',
        appKey: 'RpV5LVtsDFUXRrfsN4MH9DR6',
        placeholder: 'ヾﾉ≧∀≦)o 来呀!快活啊~',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("IJ3nRYlbTk5ht2yUt70RXSgI-gzGzoHsz", "RpV5LVtsDFUXRrfsN4MH9DR6");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.3"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.3"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->


  

</body>
</html>
